### **关于参数有效性检查的规范**

以下是针对函数参数有效性检查的详细规范和实现建议：

---

### **1. 模块间接口函数必须检查所有参数的有效性 【强制】**

**理由**：
- 模块间接口是模块功能的入口，未检查参数有效性可能导致错误传递到后续流程，引发程序崩溃。
- 提前拦截错误可以提升代码的健壮性。

**正确示例**：
```python
def calculate_area(length, width):
    """
    计算矩形的面积，检查参数是否为正数。

    参数:
    length (float): 矩形的长度。
    width (float): 矩形的宽度。

    返回:
    float: 矩形面积。

    异常:
    ValueError: 当参数为负数或非数值时抛出。
    """
    if not isinstance(length, (int, float)) or not isinstance(width, (int, float)):
        raise TypeError("长度和宽度必须为数值类型")
    if length <= 0 or width <= 0:
        raise ValueError("长度和宽度必须为正数")

    return length * width
```

**错误示例**：
```python
def calculate_area(length, width):
    # 未检查参数有效性，可能导致后续报错
    return length * width
```

---

### **2. 函数参数个数不能超过 5 个，超过时建议使用对象或字典传递 【建议】**

**理由**：
- 参数过多会导致函数调用复杂性增加，降低可读性。
- 使用对象或字典可以提高参数传递的灵活性。

**正确示例**：

**采用对象传递**：
```python
class Rectangle:
    def __init__(self, length, width, color=None, border_width=None):
        self.length = length
        self.width = width
        self.color = color
        self.border_width = border_width

def calculate_area(rectangle):
    """
    计算矩形的面积。

    参数:
    rectangle (Rectangle): 包含矩形属性的对象。

    返回:
    float: 矩形面积。
    """
    if rectangle.length <= 0 or rectangle.width <= 0:
        raise ValueError("长度和宽度必须为正数")

    return rectangle.length * rectangle.width

# 使用
rect = Rectangle(length=5, width=10, color="blue")
print(calculate_area(rect))
```

**采用字典传递**：
```python
def calculate_area(params):
    """
    计算矩形的面积。

    参数:
    params (dict): 包含矩形参数的字典。
        - length: 矩形长度 (float)
        - width: 矩形宽度 (float)

    返回:
    float: 矩形面积。
    """
    length = params.get("length")
    width = params.get("width")
    
    if length <= 0 or width <= 0:
        raise ValueError("长度和宽度必须为正数")

    return length * width

# 使用
params = {"length": 5, "width": 10}
print(calculate_area(params))
```

**错误示例**：
```python
# 参数过多导致调用复杂且难以维护
def draw_rectangle(length, width, color, border_width, x_position, y_position):
    pass
```

---

### **3. 模块间接口函数的检查方式建议封装成函数，抛异常检查不合法参数 【建议】**

**理由**：
- 检查逻辑封装成独立函数可以复用，提升代码可读性和模块化程度。
- 通过抛出异常可清晰地捕获错误，便于调试。

**示例**：

**封装检查函数**：
```python
def validate_rectangle_params(length, width):
    """
    验证矩形参数。

    参数:
    length (float): 矩形长度。
    width (float): 矩形宽度。

    异常:
    TypeError: 当参数类型不正确时抛出。
    ValueError: 当参数值无效时抛出。
    """
    if not isinstance(length, (int, float)) or not isinstance(width, (int, float)):
        raise TypeError("长度和宽度必须为数值类型")
    if length <= 0 or width <= 0:
        raise ValueError("长度和宽度必须为正数")

def calculate_area(length, width):
    """
    计算矩形的面积。

    参数:
    length (float): 矩形的长度。
    width (float): 矩形的宽度。

    返回:
    float: 矩形面积。
    """
    validate_rectangle_params(length, width)
    return length * width
```

**错误示例**：
```python
# 在每个函数中重复写检查逻辑，代码冗余
def calculate_area(length, width):
    if not isinstance(length, (int, float)) or not isinstance(width, (int, float)):
        raise TypeError("长度和宽度必须为数值类型")
    if length <= 0 or width <= 0:
        raise ValueError("长度和宽度必须为正数")
    return length * width
```

---

### **总结规范**

| **规则**                                           | **解释**                                                                 |
|----------------------------------------------------|--------------------------------------------------------------------------|
| **模块间接口函数必须检查所有参数的有效性**          | 避免不合法数据进入后续流程，检查逻辑应包含类型和数值范围验证。                  |
| **函数参数个数不能超过 5 个**                       | 超过 5 个参数时建议使用 `class` 或 `dict` 提高代码可读性。                     |
| **参数检查逻辑封装成函数**                          | 独立封装检查逻辑可复用，遇到不合法参数抛异常，提高代码模块化和错误处理的清晰度。 |

通过这些规则，可以让代码在参数校验时更加健壮、可读和易维护。